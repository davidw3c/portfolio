<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="https://davidw3c.github.io/portfolio/css/unsemantic.css">
    <link rel="stylesheet" type="text/css" href="https://davidw3c.github.io/portfolio/css/styles.css">
    <link rel="icon" type="image/png" sizes="32x32" href="https://davidw3c.github.io/portfolio/favicon.png">
    
    
    <title>David Walker | The Ogden Trust - Front end site build</title>
</head><body class="site"><div class="header">
    <div class="grid-container">
        <div class="grid-30 tablet-grid-30 mobile-grid-100">
            <a href="https://davidw3c.github.io/portfolio/" class="header-logoLink">
                David Walker
            </a>

            <a href="#" id="nav_toggle">Show Menu</a>
        </div>
        <div class="grid-70 tablet-grid-70 mobile-grid-100">
            <nav class="header-nav">
                <ul>
                
                
                <li><a class="header-nav-item" href="/portfolio/" title="">Home</a></li>
                
                <li><a class="header-nav-item" href="/portfolio/posts/" title="">Posts</a></li>
                
                <li><a class="header-nav-item" href="/portfolio/projects/" title="">Projects</a></li>
                
                <li><a class="header-nav-item" href="/portfolio/tags/" title="">Tags</a></li>
                
                <li>
                    <a href="https://codepen.io/davidatchameleon/" target="_blank" class="navButton navButton--codepen">Codepen</a>
                </ul>
            </nav>
        </div>
    </div>
</div>





<main>
           

<div class="heading">
	<div class="grid-container">
		<div class="grid-90">
			<h1 class="heading-title">The Ogden Trust - Front end site build</h1>

			<p class="date">


<time datetime="2021-10-02">2 October, 2021</time>

		
</p>	
		</div>
	</div>
</div>

<div class="content">
	<div class="grid-container">
		<div class="grid-100">
			<p>The Ogden Trust is a charitable organisation based in London which aims to increase the uptake of physics for all at post-16.</p>
<h2 id="project-briefing">Project Briefing</h2>
<p>For the initial project briefing, I was presented with an RNIB audit report for the accessibility of the existing Ogden Trust website to see what accessibility issues had been raised.</p>
<p>My goal with the new Ogden Trust website is to build a site that focusses on two key areas: 1) Accessibility and 2) Performance.</p>
<h2 id="pixel-perfect">Pixel Perfect</h2>
<p>To match the designs as closely as possible, I often use a google chrome extension plugin called ‘Perfect Pixel’. The plugin is like the digital equivalent of ‘tracing paper’ in that it allows you to select a JPG image to overlay on top of the website and reduce the opacity so that you can then manually tweak padding, margins and font sizes until they match the design.</p>
<p>For pixel perfect responsive, I took the initial design templates and resized them for each media query container size (1320, 1140, 940 ect.) and then tried to match each as closely as possible to keep the general aspect ratio and proportions of various components consistent across media queries.</p>
<h2 id="wave-hello-to-accessibility">WAVE hello to Accessibility</h2>
<p>In order to test accessibility as I build the website, I have installed the WAVE (Web accessibility evaluation tool) by WebAIM in Google Chrome. This will help flag up various issues as they arise.</p>
<h2 id="responsive-tables">Responsive Tables</h2>
<p>There will sometimes be table data needed on the Ogden Trust website and one frequent issue with tables in responsive web design is how to handle the table on a mobile device without the data becoming too compressed.</p>
<p>In this project I opted to allow users to swipe gesture to browse the table, and added in some CSS pseudo content to indicate this.</p>
<h2 id="rnib">RNIB</h2>
<p>The website must pass an RNIB Audit - so I am building this project with accessibility in the forefront of my mind.</p>
<h2 id="accessibility-friendly-dropdown-menu-in-vanilla-js">Accessibility Friendly Dropdown Menu in Vanilla JS</h2>
<p>Using the Wordpress Menu system, I wanted my dropdown menus to incorporate certain accessibility features.</p>
<p>I decided to build an ‘on click’ menu system. The reason for choosing click as opposed to hover, is because clicking is an intentional action. When you want to do something, you click, however when using the mouse, you have no choice but to hover and thus any item such as a dropdown that appears on hover runs the risk of appearing unintentionally.</p>
<p>The second reason for choosing click over hover is that this mechanism is consistent across all mediums - tablets, mobile phones, screen readers, keyboard users, mouse users and so on.</p>
<p>One thing I wanted to add in for accessibility purposes, was for menu links with dropdowns to contain an ‘aria-expanded’ attribute.</p>
<p>So I wrote some JS which traverses the DOM to append this attribute to all <!-- raw HTML omitted --> tags whereby the parent <!-- raw HTML omitted --> has a class of <code>menu-item-has-children</code></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">menu_item_has_children</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;.menu-item-has-children &gt; a&#39;</span><span class="p">);</span>

<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">menu_item_has_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// Append ARIA states to all links with dropdowns
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">att</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createAttribute</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">);</span>
<span class="nx">att</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&#34;false&#34;</span><span class="p">;</span>
<span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setAttributeNode</span><span class="p">(</span><span class="nx">att</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>I then created an onClick event, which would append an ‘active’ class to the <!-- raw HTML omitted --> to show/hide the dropdown, but also update my new aria attribute to be either true, or false, depending on whether the menu is showing or hidden:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// On Click Event
</span><span class="c1"></span><span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

<span class="c1">// Set Active Class &amp; ARIA State
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">))</span> <span class="p">{</span>
<span class="k">this</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

<span class="c1">// Close Any Open Dropdowns.
</span><span class="c1"></span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">menu_item_has_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
<span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">this</span><span class="p">.</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>I also wanted some code which would close the dropdown if the user clicks anywhere on the page except the dropdown or the menu bar.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">// Close Open Dropdowns when clicking outside menu
</span><span class="c1"></span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">menu_item_has_children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentElement</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">);</span>
<span class="nx">menu_item_has_children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
<span class="nx">menu</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
<span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div><p>This code works by registering an on click event so that when the user clicks on the ‘body’, any open dropdowns will close. However - doing this alone would not work because the menu itself is part of the body and the event would ‘propagate’. Therefore, we stop the propagation on the menu itself, in order that clicking on the menu would not trigger the close event.</p>
<h3 id="making-the-menu-keyboard-friendly">Making the menu keyboard friendly</h3>
<p>One of the good things is that the menu so far is possible to use via keyboard - by tabbing through the various links and then pressing the ‘enter’ key to activate the dropdowns.</p>
<p>This is good usability because if we simply showed the dropdowns right away on focus with the tab key, it would mean keyboard users would have to tab through every single link in the dropdown menus every time they tab through a page - so by adding the ‘enter’ (or click) as the condition by which dropdowns show, it gives users a choice each step of the way.</p>
<p>However, the key problem here is that the dropdowns do not close once the user tabs onto the next menu item, potentially resulting in drop down menus which are left open for keyboard users.</p>
<p>To achieve the closing of dropdown menus for keyboard users, I wrote the following code which went inside my existing for loop:</p>
<pre><code>// Add Keyboard Controls to Close Submenu on tab
if (menu_item_has_children[i].nextElementSibling) {
var subMenu = menu_item_has_children[i].nextElementSibling;
var subMenuLinks = subMenu.querySelectorAll('a');
var lastLinkIndex = subMenuLinks.length - 1;
var lastLink = subMenuLinks[lastLinkIndex];

lastLink.addEventListener('blur', function() {
var this_parents_li = this.parentElement.parentElement.parentElement;
var this_parents_a = this.parentElement.parentElement.parentElement.firstChild;
// console.log(this_parents_li.firstChild);
this_parents_li.classList.remove('active');
this_parents_a.setAttribute('aria-expanded', 'false');
});
}
</code></pre><p>What we are using here is Javascript ‘blur’ event. A ‘blur’ is an event that gets triggered when an element loses focus.</p>
<p>A typical menu item with children in the code looks like this:</p>
<pre><code>&lt;li class=&quot;menu-item-has-children&quot;&gt;
&lt;a href=&quot;#&quot; aria-expanded=&quot;false&quot;&gt;About&lt;/a&gt;
&lt;ul class=&quot;sub-menu&quot;&gt;&lt;/ul&gt;
&lt;/li&gt;
</code></pre><p>So <code>menu_item_has_children[i]</code> is returning the <!-- raw HTML omitted --> tags of all <!-- raw HTML omitted -->’s in the menu which have the class of ‘menu-item-has-children’. I am then using <code>nextElementSibling</code> , because inside each <!-- raw HTML omitted --> is a  <code>&lt;ul class=&quot;sub-menu&quot;&gt;</code> - which is the next element sibling (our dropdown).
Inside this dropdown, I want to then check when the user has reached the LAST link - so I query all of the links inside <code>sub-menu</code>, count them using <code>.length</code> and then check which one is the last indexed item. This is where I want to fire my ‘blur’ event, which will then traverse the DOM back up to this items parent <!-- raw HTML omitted --> and remove the active class and set aria-expanded back to false.</p>	

			<br>
			<p><a href="https://davidw3c.github.io/portfolio/projects">Return to Projects</a></p>			
		</div>
	</div>
</div>

   
           
        </main><div class="footer">
	<div class="grid-container">
		<div class="grid-100">
			<p style="margin-top:0;">&copy; 2021 David Walker. All rights reserved. <span>Website Powered by <a href="https://gohugo.io/"><img src="https://davidw3c.github.io/portfolio//img/hugo.svg" alt=""></a></span>
			</p>

			
			
		</div>
	</div>
</div>

<script src="https://davidw3c.github.io/portfolio/js/main.js"></script></body>
</html>